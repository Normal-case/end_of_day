{% extends 'base.html' %}
{% load static %}
{% block content %}

{% if messages %}
	{% for message in messages %}
        <script>
            alert('{{ message }}')
        </script>
	{% endfor %}
{% endif %}

<div id="main_con">
    {% if target_user.profile %}
    <div style='text-align: center; padding-top: 100px;'>
        <div>
            <span style='font-size: 48px; font-family: "Jua", sans-serif; color: #505050;'>하루끝 맴버스!</span>
        </div>
        <div class='profile_card'>
            <div style='border-radius: 70%; width:150px; height:150px; overflow: hidden; margin-right: 50px;'>
                <img src="{{ target_user.profile.profile_image.url }}" alt="" style='width:100%; height:100%; object-fit: cover;'>
            </div>
            <div class="profile_wrapper">
                <div class="profile_con">
                    <div class="profile_text">닉네임</div>
                    <strong>{{ target_user.profile.nickname }}</strong>
                </div>
                <div class="profile_con">
                    <div class="profile_text">전화번호</div>
                    <strong>{{ target_user.profile.phone_number }}</strong>
                </div>
                <div class="profile_con">
                    <div class="profile_text">생년월일</div>
                    <strong>{{ target_user.profile.birth | date:"Y-m-d" }}</strong>
                </div>
            </div>
        </div>

        <div style='padding-top: 30px;'>
            <form action="" method='post'>
                {% csrf_token %}
                <input type="text" name='search' class='search_input'>
                <input type="submit" value='찾기' class='btn btn-secondary col-1 rounded-pill'>
            </form>
            {% if search_user %}
            <form action="" method='post'>
                {% csrf_token %}
                <ul class='search_user_list'>
                    {% for u in search_user %}
                        {% if not u.nickname == user.profile.nickname %}
                        <li><input type="submit" name='invite' value={{u.nickname}} class='submit_button'></li>
                        {% endif %}
                    {% endfor %}
                </ul>
            </form>

            <span>같이 교환일기를 작성하고 싶은 사용자를 클릭해주세요!</span>
            {% endif %}
        </div>

        <div style='padding-top: 30px;'>
            {% if invite_message %}
                {% for i in invite_message %}
                <form action="" method='post'>
                    {% csrf_token %}
                    <ul>
                        <li>'{{ i.sender }}'님의 교환일기 공동 작성 요청</li>
                        <li style='padding-top: 10px;'>
                            <input type="submit" class='btn btn-success col-1 rounded-pill' name='accept' value='수락'>
                            <input type="submit" class='btn btn-danger col-1 rounded-pill' name='reject' value='거절'>
                            <input type="hidden" name='sender' value='{{i.sender}}'>
                        </li>
                    </ul>
                </form>
                {% endfor %}
            {% endif %}
        </div>

    </div>


    {% else %}

        <div style='text-align: center; padding: 80px 0;'>
            <img src="/static/free-icon-anonymous.png" alt="" style="width: 100px; height:auto;">
        </div>

        <div style='text-align: center;'>
            <p>아직 프로필이 등록되지 않았습니다! 프로필을 등록해주세요.</p>
        </div>

        <div style='text-align: center; padding-top: 20px;'>
            <a href="{% url 'profileapp:create' id=user.username %}" style='text-decoration: none; color: white;' class='btn btn-secondary col-2 rounded-pill'>프로필 생성</a>
        </div>
    {% endif %}

</div>

{% endblock %}